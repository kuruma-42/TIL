# 난수 (Random Number)

### 난수의 용도

- 키 생성
    - 대칭 암호나 메시지 인증 코드
- 키 쌍 생성
    - 공개 키 암호나 디지털 서명
- 초기화 벡터(IV) 생성
    - 재전송 공격 방지나 블록 암호의 CTR 모드
- 솔트 생성
    - 패스워드를 기초로 한 암호화(PBE)
- 일회용 패드
    - 패딩에 사용되는 열을 생성

### 난수의 성질

- 무작위성
    - 통계적인 편중이 없이 수열이 무작위로 되어있는 성질
- 예측 불가능성
    - 과거의 수열로부터 다음 수를 예측할 수 없다는 성질
- 재현 불가능성
    - 같은 수열을 재현할 수 없다는 성질

### 의사난수 생성기

- 난수 생성기 (Random Number Generator; RNG)
    - 하드웨어로 생성
- 의사 난수 생성기 (pseudo random number generator; PRNG)
    - 소프트웨어로 생성, 주기성 존재

### 구체적 의사난수 생성기

- 무작위 방법
    - 긴 주기
        - 암호 기술에서 사용하는 난수는 예측 불가능성을 가져야 하므로 주기가 짧아서는 안 됨
        - 복잡한 알고리즘 보다는 명확한 알고리즘
            - 예측 불가능성을 갖는지 어떤지 평가 가능

### 선형 합동법 (Linear Congruential Method) → Linear Congruential Generator( LCG)

- 예측 불가능성을 갖지 않음(주기 존재) → 암호 기술에 사용하면 안 됨
- mod 를 사용하기 때문에 주기를 갖게 된다

### 일방향 해시 함수를 사용하는 방법

- 일방향 해시 함수의 일방향성이 의사난수 생성기의 예측 불가능성을 보장 : 강한 의사난수 (암호학에서 자주 사용된다)

<img width="366" alt="스크린샷 2025-05-05 오후 8 20 54" src="https://github.com/user-attachments/assets/88bf4fc0-0507-4beb-b2ae-b231b8ccd179" />


### 암호를 사용하는 방법

- DES와 같은 대칭 암호나 RSA와 같은 공개 키 암호를 사용해서 ‘강한 의사난수’를 생성하는 의사난수 생성기
- 암호의 기밀성이 의사난수 생성기의 예측 불가능성을 보장

<img width="578" alt="스크린샷 2025-05-05 오후 8 22 48" src="https://github.com/user-attachments/assets/959636e4-82b6-4cb7-ada4-b50f0278aeea" />


### ANSI X9.17 의사난수 생성 절차

- 암호 소프트웨어 PGP에서 사용하는 의사난수 생성기
    - ANSI X9.17
    - ANSI X9.31
1. 내부 상태 초기화
2. 현재 시각을 암호화
3. 내부 상태화 암호화된 현재 시각을 XOR
4. 절차 3의 결과를 암호화
5. 절차 4의 결과를 암호화
6. 절차 4의 출력과 암호화된 현재 시각을 XOR
7. 절차 6의 결과를 암호화
8. 절차 7의 결과를 새로운 내부 상태로 세팅
9. 절자 2-8을 필요한 만큼의 의사난수가 얻어질 때 까지 반복

<img width="302" alt="스크린샷 2025-05-05 오후 8 26 00" src="https://github.com/user-attachments/assets/ff7b2a33-f471-46da-a2c0-f8aa99d989b2" />

